(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f4b2eaa"],{"057f":function(e,t,r){var n=r("c6b6"),o=r("fc6a"),a=r("241c").f,c=r("4dae"),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return a(e)}catch(t){return c(l)}};e.exports.f=function(e){return l&&"Window"==n(e)?i(e):a(o(e))}},"1dde":function(e,t,r){var n=r("d039"),o=r("b622"),a=r("2d00"),c=o("species");e.exports=function(e){return a>=51||!n((function(){var t=[],r=t.constructor={};return r[c]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"428f":function(e,t,r){var n=r("da84");e.exports=n},"4dae":function(e,t,r){var n=r("da84"),o=r("23cb"),a=r("07fa"),c=r("8418"),l=n.Array,i=Math.max;e.exports=function(e,t,r){for(var n=a(e),d=o(t,n),s=o(void 0===r?n:r,n),u=l(i(s-d,0)),b=0;d<s;d++,b++)c(u,b,e[d]);return u.length=b,u}},"4de4":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").filter,a=r("1dde"),c=a("filter");n({target:"Array",proto:!0,forced:!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"746f":function(e,t,r){var n=r("428f"),o=r("1a2d"),a=r("e538"),c=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||c(t,e,{value:a.f(e)})}},8418:function(e,t,r){"use strict";var n=r("a04b"),o=r("9bf2"),a=r("5c6c");e.exports=function(e,t,r){var c=n(t);c in e?o.f(e,c,a(0,r)):e[c]=r}},"99af":function(e,t,r){"use strict";var n=r("23e7"),o=r("da84"),a=r("d039"),c=r("e8b5"),l=r("861d"),i=r("7b0b"),d=r("07fa"),s=r("8418"),u=r("65f0"),b=r("1dde"),f=r("b622"),m=r("2d00"),p=f("isConcatSpreadable"),O=9007199254740991,h="Maximum allowed index exceeded",j=o.TypeError,v=m>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=b("concat"),y=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:c(e)},V=!v||!g;n({target:"Array",proto:!0,forced:V},{concat:function(e){var t,r,n,o,a,c=i(this),l=u(c,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?c:arguments[t],y(a)){if(o=d(a),b+o>O)throw j(h);for(r=0;r<o;r++,b++)r in a&&s(l,b,a[r])}else{if(b>=O)throw j(h);s(l,b++,a)}return l.length=b,l}})},a4d3:function(e,t,r){"use strict";var n=r("23e7"),o=r("da84"),a=r("d066"),c=r("2ba4"),l=r("c65b"),i=r("e330"),d=r("c430"),s=r("83ab"),u=r("4930"),b=r("d039"),f=r("1a2d"),m=r("e8b5"),p=r("1626"),O=r("861d"),h=r("3a9b"),j=r("d9b5"),v=r("825a"),g=r("7b0b"),y=r("fc6a"),V=r("a04b"),N=r("577e"),E=r("5c6c"),w=r("7c73"),x=r("df75"),P=r("241c"),k=r("057f"),M=r("7418"),S=r("06cf"),C=r("9bf2"),D=r("37e8"),U=r("d1e7"),B=r("f36a"),z=r("6eeb"),T=r("5692"),q=r("f772"),F=r("d012"),$=r("90e3"),_=r("b622"),J=r("e538"),A=r("746f"),I=r("d44e"),L=r("69f3"),Q=r("b727").forEach,W=q("hidden"),X="Symbol",G="prototype",H=_("toPrimitive"),K=L.set,R=L.getterFor(X),Y=Object[G],Z=o.Symbol,ee=Z&&Z[G],te=o.TypeError,re=o.QObject,ne=a("JSON","stringify"),oe=S.f,ae=C.f,ce=k.f,le=U.f,ie=i([].push),de=T("symbols"),se=T("op-symbols"),ue=T("string-to-symbol-registry"),be=T("symbol-to-string-registry"),fe=T("wks"),me=!re||!re[G]||!re[G].findChild,pe=s&&b((function(){return 7!=w(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=oe(Y,t);n&&delete Y[t],ae(e,t,r),n&&e!==Y&&ae(Y,t,n)}:ae,Oe=function(e,t){var r=de[e]=w(ee);return K(r,{type:X,tag:e,description:t}),s||(r.description=t),r},he=function(e,t,r){e===Y&&he(se,t,r),v(e);var n=V(t);return v(r),f(de,n)?(r.enumerable?(f(e,W)&&e[W][n]&&(e[W][n]=!1),r=w(r,{enumerable:E(0,!1)})):(f(e,W)||ae(e,W,E(1,{})),e[W][n]=!0),pe(e,n,r)):ae(e,n,r)},je=function(e,t){v(e);var r=y(t),n=x(r).concat(Ne(r));return Q(n,(function(t){s&&!l(ge,r,t)||he(e,t,r[t])})),e},ve=function(e,t){return void 0===t?w(e):je(w(e),t)},ge=function(e){var t=V(e),r=l(le,this,t);return!(this===Y&&f(de,t)&&!f(se,t))&&(!(r||!f(this,t)||!f(de,t)||f(this,W)&&this[W][t])||r)},ye=function(e,t){var r=y(e),n=V(t);if(r!==Y||!f(de,n)||f(se,n)){var o=oe(r,n);return!o||!f(de,n)||f(r,W)&&r[W][n]||(o.enumerable=!0),o}},Ve=function(e){var t=ce(y(e)),r=[];return Q(t,(function(e){f(de,e)||f(F,e)||ie(r,e)})),r},Ne=function(e){var t=e===Y,r=ce(t?se:y(e)),n=[];return Q(r,(function(e){!f(de,e)||t&&!f(Y,e)||ie(n,de[e])})),n};if(u||(Z=function(){if(h(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?N(arguments[0]):void 0,t=$(e),r=function(e){this===Y&&l(r,se,e),f(this,W)&&f(this[W],t)&&(this[W][t]=!1),pe(this,t,E(1,e))};return s&&me&&pe(Y,t,{configurable:!0,set:r}),Oe(t,e)},ee=Z[G],z(ee,"toString",(function(){return R(this).tag})),z(Z,"withoutSetter",(function(e){return Oe($(e),e)})),U.f=ge,C.f=he,D.f=je,S.f=ye,P.f=k.f=Ve,M.f=Ne,J.f=function(e){return Oe(_(e),e)},s&&(ae(ee,"description",{configurable:!0,get:function(){return R(this).description}}),d||z(Y,"propertyIsEnumerable",ge,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Z}),Q(x(fe),(function(e){A(e)})),n({target:X,stat:!0,forced:!u},{for:function(e){var t=N(e);if(f(ue,t))return ue[t];var r=Z(t);return ue[t]=r,be[r]=t,r},keyFor:function(e){if(!j(e))throw te(e+" is not a symbol");if(f(be,e))return be[e]},useSetter:function(){me=!0},useSimple:function(){me=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!s},{create:ve,defineProperty:he,defineProperties:je,getOwnPropertyDescriptor:ye}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Ve,getOwnPropertySymbols:Ne}),n({target:"Object",stat:!0,forced:b((function(){M.f(1)}))},{getOwnPropertySymbols:function(e){return M.f(g(e))}}),ne){var Ee=!u||b((function(){var e=Z();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));n({target:"JSON",stat:!0,forced:Ee},{stringify:function(e,t,r){var n=B(arguments),o=t;if((O(t)||void 0!==e)&&!j(e))return m(t)||(t=function(e,t){if(p(o)&&(t=l(o,this,e,t)),!j(t))return t}),n[1]=t,c(ne,null,n)}})}if(!ee[H]){var we=ee.valueOf;z(ee,H,(function(e){return l(we,this)}))}I(Z,X),F[W]=!0},b0c0:function(e,t,r){var n=r("83ab"),o=r("5e77").EXISTS,a=r("e330"),c=r("9bf2").f,l=Function.prototype,i=a(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(d.exec),u="name";n&&!o&&c(l,u,{configurable:!0,get:function(){try{return s(d,i(this))[1]}catch(e){return""}}})},bd81:function(e,t,r){"use strict";var n=r("7a23"),o={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},a={class:"modal-dialog"},c={class:"modal-content border-0"},l=Object(n["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(n["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(n["createElementVNode"])("span",null,"刪除產品")]),Object(n["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},d=Object(n["createTextVNode"])(" 是否刪除 "),s={class:"text-danger"},u=Object(n["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),b={class:"modal-footer"},f=Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function m(e,t,r,m,p,O){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",c,[l,Object(n["createElementVNode"])("div",i,[d,Object(n["createElementVNode"])("strong",s,Object(n["toDisplayString"])(p.title),1),u]),Object(n["createElementVNode"])("div",b,[f,Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return O.deleteProduct&&O.deleteProduct.apply(O,arguments)})}," 確認刪除 ")])])])],512)}var p=r("7b17"),O={data:function(){return{modal:"",data:"",title:""}},methods:{deleteProduct:function(){this.$emit("delete-product",this.data.status,this.data.cart)},openModal:function(e,t,r){this.modal.show(),this.title=t,this.data={status:e,cart:r}},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new p["a"](document.getElementById("delProductModal"),{})}},h=r("6b0d"),j=r.n(h);const v=j()(O,[["render",m]]);t["a"]=v},cc55:function(e,t,r){"use strict";r.r(t);r("b0c0"),r("b64b");var n=r("7a23"),o={class:"container"},a={class:"text-end"},c={class:"table align-middle"},l=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th"),Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["createElementVNode"])("th",{class:"text-end"},"單價")])],-1),i=["onClick"],d=Object(n["createElementVNode"])("div",{class:"text-success"},"已套用優惠券",-1),s={class:"input-group input-group-sm"},u={class:"input-group mb-3"},b=["onUpdate:modelValue","onChange"],f={class:"input-group-text",id:"basic-addon2"},m={class:"text-end"},p=Object(n["createElementVNode"])("small",{class:"text-success"},"折扣價：",-1),O={key:1},h=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-center"},"購物車目前沒有商品",-1),j=[h],v=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),g={class:"text-end"},y=Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),V={class:"text-end text-success"},N={class:"my-5 row justify-content-center"},E={class:"mb-3"},w=Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),x={class:"mb-3"},P=Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),k={class:"mb-3"},M=Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),S={class:"mb-3"},C=Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),D={class:"mb-3"},U=Object(n["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),B={class:"text-end"},z=["disabled"];function T(e,t,r,h,T,q){var F=this,$=Object(n["resolveComponent"])("delProductModal"),_=Object(n["resolveComponent"])("VField"),J=Object(n["resolveComponent"])("ErrorMessage"),A=Object(n["resolveComponent"])("VForm");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])($,{onDeleteProduct:q.deleteCarts,ref:"delModal"},null,8,["onDeleteProduct"]),Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["btn btn-outline-danger",{disabled:T.cart.carts.length<1}]),type:"button",onClick:t[0]||(t[0]=function(e){return q.openDelProductModal("all","所有")})}," 清空購物車 ",2)]),Object(n["createElementVNode"])("table",c,[l,Object(n["createElementVNode"])("tbody",null,[T.cart.carts.length>0?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(T.cart.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return q.openDelProductModal("single",e.product.title,e)}}," x ",8,i)]),Object(n["createElementVNode"])("td",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.product.title)+" ",1),d]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",u,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return q.updateCarts("edit",e)}},null,40,b),[[n["vModelText"],e.qty,void 0,{lazy:!0}]]),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])(e.product.unit),1)])])]),Object(n["createElementVNode"])("td",m,[p,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.final_total),1)])])})),128)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",O,j))]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[v,Object(n["createElementVNode"])("td",g,Object(n["toDisplayString"])(T.cart.total),1)]),Object(n["createElementVNode"])("tr",null,[y,Object(n["createElementVNode"])("td",V,Object(n["toDisplayString"])(T.cart.final_total),1)])])]),Object(n["createElementVNode"])("div",N,[Object(n["createVNode"])(A,{ref:"form",class:"col-md-6",onSubmit:q.submitOrder},{default:Object(n["withCtx"])((function(e){var r=e.errors;return[Object(n["createElementVNode"])("div",E,[w,Object(n["createVNode"])(_,{id:"email",name:"email",type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["email"]}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:T.order.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return T.order.user.email=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",x,[P,Object(n["createVNode"])(_,{id:"name",name:"姓名",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:T.order.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return T.order.user.name=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",k,[M,Object(n["createVNode"])(_,{id:"tel",name:"電話",type:"tel",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["電話"]}]),placeholder:"請輸入電話",rules:{required:!0,numeric:!0,min:8,regex:/^09/},modelValue:T.order.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return T.order.user.tel=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"電話",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",S,[C,Object(n["createVNode"])(_,{id:"address",name:"地址",type:"address",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":r["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:T.order.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return T.order.user.address=e}),modelModifiers:{lazy:!0}},null,8,["class","modelValue"]),Object(n["createVNode"])(J,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",D,[U,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[5]||(t[5]=function(e){return T.order.message=e})},null,512),[[n["vModelText"],T.order.message,void 0,{lazy:!0}]])]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("button",{type:"submit",class:"btn btn-danger",disabled:F.cart.carts.length<1||Object.keys(r).length>0}," 送出訂單 ",8,z)])]})),_:1},8,["onSubmit"])])])],64)}var q=r("5530"),F=(r("99af"),r("bd81")),$={data:function(){return{cart:{carts:[]},order:{user:{},message:""},apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"kn99"}},components:{delProductModal:F["a"]},methods:{getCarts:function(){var e=this,t=this.$loading.show();this.axios.get("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart")).then((function(r){t.hide(),e.cart=r.data.data})).catch((function(e){console.log(e.response)}))},updateCarts:function(e,t){var r=this,n=t.id,o=t.product_id,a=t.qty,c="post",l="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/");"edit"===e&&(c="put",l="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(n)),this.axios[c](l,{data:{product_id:o,qty:a}}).then((function(){r.hideProductModal(),r.getCarts()})).catch((function(e){console.log(e)}))},deleteCarts:function(e,t){var r=this,n="";"all"===e?n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/carts/"):"single"===e&&(n="".concat(this.apiUrl,"/api/").concat(this.apiPath,"/cart/").concat(t.id)),this.axios.delete(n).then((function(){r.hideDelProductModal(),r.getCarts()})).catch((function(e){console.log(e)}))},openDelProductModal:function(e,t,r){this.$refs.delModal.openModal(e,t,r)},hideDelProductModal:function(){this.$refs.delModal.hideModal()},submitOrder:function(){var e=this,t=this.$loading.show();this.axios.post("".concat(this.apiUrl,"/api/").concat(this.apiPath,"/order"),{data:Object(q["a"])({},this.order)}).then((function(r){t.hide();var n=r.data,o=n.message,a=n.total;alert("".concat(o,"，總金額為 ").concat(a)),e.$refs.form.resetForm(),e.order.message="",e.getCarts()})).catch((function(e){console.log(e)}))}},mounted:function(){this.getCarts()}},_=r("6b0d"),J=r.n(_);const A=J()($,[["render",T]]);t["default"]=A},dbb4:function(e,t,r){var n=r("23e7"),o=r("83ab"),a=r("56ef"),c=r("fc6a"),l=r("06cf"),i=r("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,r,n=c(e),o=l.f,d=a(n),s={},u=0;while(d.length>u)r=o(n,t=d[u++]),void 0!==r&&i(s,t,r);return s}})},e439:function(e,t,r){var n=r("23e7"),o=r("d039"),a=r("fc6a"),c=r("06cf").f,l=r("83ab"),i=o((function(){c(1)})),d=!l||i;n({target:"Object",stat:!0,forced:d,sham:!l},{getOwnPropertyDescriptor:function(e,t){return c(a(e),t)}})},e538:function(e,t,r){var n=r("b622");t.f=n}}]);
//# sourceMappingURL=chunk-5f4b2eaa.c77c90be.js.map